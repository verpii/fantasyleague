<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="fantasyleague.V.MyTeamPage"
             xmlns:vm="clr-namespace:fantasyleague.VM"
             xmlns:m="clr-namespace:fantasyleague.M"
             x:DataType="vm:MyTeamPageViewModel"
             Title="CsapatÃ¶sszeÃ¡llÃ­tÃ¡s (Roster)"
             Loaded="MainPage_OnLoaded">

   
  

  

    <ScrollView>
       
        <VerticalStackLayout Spacing="15" Padding="20">

            <Frame BackgroundColor="#1E90FF" Padding="15" CornerRadius="10" HasShadow="True">
                <VerticalStackLayout>
                    <Label Text="{Binding RefreshUserteam.TeamName}" 
                           FontSize="Title" 
                           TextColor="White" 
                           FontAttributes="Bold" 
                           HorizontalOptions="Center" />

                    <Grid ColumnDefinitions="*, *" Margin="0, 10, 0, 0">
                        <VerticalStackLayout Grid.Column="0" HorizontalOptions="Center">
                            <Label Text="Heti PontszÃ¡m:" TextColor="White" FontAttributes="Bold"/>
                            <Label Text="{Binding RefreshUserteam.CurrentPoints}" 
                                   FontSize="Large" 
                                   TextColor="#FFD700" 
                                   FontAttributes="Bold"/>
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="1" HorizontalOptions="Center">
                            <Label Text="KÃ¶ltsÃ©gvetÃ©s:" TextColor="White" FontAttributes="Bold"/>
                            <Label Text="{Binding RefreshUserteam.Budget, StringFormat='{0} ðŸ’°'}" 
                                   FontSize="Large" 
                                   TextColor="#90EE90" 
                                   FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <Grid ColumnDefinitions="*,*">
                <Label Grid.Column="0" Text="Leigazolt JÃ¡tÃ©kosok ÃttekintÃ©se" 
                   FontSize="Large" 
                   FontAttributes="Bold" 
                   />


                <Button Grid.Column="1" BackgroundColor="Black"   WidthRequest="130" Text="Sell Player" TextColor="Red" HorizontalOptions="End" Command="{Binding DeletePlayerCommand}"/>

            </Grid>

            <CollectionView ItemsSource="{Binding PlayersInTeam}" SelectionMode="Single" SelectedItem="{Binding SelectedPlayer}">       
                <CollectionView.EmptyView>
                    <VerticalStackLayout Padding="20" HorizontalOptions="Center">
                        <Label Text="Nincs mÃ©g Ã¶sszeÃ¡llÃ­tott csapatod. ðŸ˜¢" FontAttributes="Italic" TextColor="Gray"/>
                        <Button Text="IrÃ¡ny a Market a leigazolÃ¡sokhoz!" TextColor="#1E90FF" HorizontalOptions="Center" BackgroundColor="Transparent" Command="{Binding NavigateToMarketCommand}"/>
                    </VerticalStackLayout>
                </CollectionView.EmptyView>
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="m:Player">

                        <Border Opacity="10" Stroke="Black" >
                            
                            <Grid ColumnDefinitions="60, *, 90" Padding="10">

                                <Label Grid.Column="0" 
                                       Text="{Binding Role}" 
                                       FontSize="Medium" 
                                       FontAttributes="Bold" 
                                       TextColor="#1E90FF"
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center" />

                                <VerticalStackLayout Grid.Column="1" Padding="5, 0" VerticalOptions="Center">
                                    <Label Text="{Binding Ign}" FontSize="Medium" FontAttributes="Bold"/>
                                    <Label Text="{Binding Team}" FontSize="Small" TextColor="Gray"/>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Column="2" HorizontalOptions="Center" VerticalOptions="Center">
                                    <Label Text="EladÃ¡si Ãr" FontSize="Small" TextColor="Gray"/>
                                    <Label Text="{Binding Sellingprice, StringFormat='{0} ðŸ’°'}" 
                                           FontSize="Medium" 
                                           FontAttributes="Bold" 
                                           TextColor="#B22222"/>
                                </VerticalStackLayout>

                                <!--<VerticalStackLayout Grid.Column="3" HorizontalOptions="Center" VerticalOptions="Center">
                                    <Label Text="Heti Pont" FontSize="Small" TextColor="Gray"/>
                                    <Label Text="{Binding CurrentPoints}" 
                                           FontSize="Medium" 
                                           FontAttributes="Bold"
                                           TextColor="#FF8C00"/>
                                </VerticalStackLayout>-->
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>